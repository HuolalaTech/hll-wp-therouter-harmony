"use strict";var __importDefault=this&&this.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.HvigorErrorCommonAdapter=void 0;const os_1=__importDefault(require("os")),hvigor_common_1=require("@ohos/hvigor-common"),HvigorLogInfo_js_1=require("./HvigorLogInfo.js"),ErrorLogConsts_js_1=require("../consts/ErrorLogConsts.js");class HvigorErrorCommonAdapter{convertErrorToLogInfo(o){return new HvigorLogInfo_js_1.HvigorLogInfo({message:HvigorErrorCommonAdapter.red+this.combinePhase(o)+HvigorErrorCommonAdapter.reset,logLevel:ErrorLogConsts_js_1.LogLevel.ERROR})}convertWarnToLogInfo(o){return new HvigorLogInfo_js_1.HvigorLogInfo({message:HvigorErrorCommonAdapter.yellow+o+HvigorErrorCommonAdapter.reset,logLevel:ErrorLogConsts_js_1.LogLevel.WARN})}convertInfoToLogInfo(o){return new HvigorLogInfo_js_1.HvigorLogInfo({message:HvigorErrorCommonAdapter.green+o+HvigorErrorCommonAdapter.reset,logLevel:ErrorLogConsts_js_1.LogLevel.INFO})}convertDebugToLogInfo(o){return new HvigorLogInfo_js_1.HvigorLogInfo({message:o,logLevel:ErrorLogConsts_js_1.LogLevel.DEBUG})}combinePhase(o){return this.combinePhase1(o)+`${os_1.default.EOL}`+this.combinePhase2(o)+`${os_1.default.EOL}`+this.combinePhase3(o)}combinePhase1(o){return`${o.getCode()} ${o.getDescription()}`}combinePhase2(o){const r=" At ",e=r+o.getPosition();return`Error Message: ${o.getCause()}${e===r?"":e}`.includes(ErrorLogConsts_js_1.SPLIT_TAG)?this.composeCauseAndPosition(o.getCause(),o.getPosition()):`Error Message: ${o.getCause()}${e===r?"":e}`}composeCauseAndPosition(o,r){let e="Error Message: ";const t=" At ",s=o.split(ErrorLogConsts_js_1.SPLIT_TAG),n=r.split(ErrorLogConsts_js_1.SPLIT_TAG);return e=s.length===n.length?this.composeCauseAndPositionWithSameLength(s,n,t,e):this.composeCauseAndPositionWithUnSameLength(s,n,` ${t}`,e),e}composeCauseAndPositionWithSameLength(o,r,e,t){for(let s=0;s<o.length;s++){t+=o[s]+(e+r[s])+`${os_1.default.EOL}`}return t.slice(0,-`${os_1.default.EOL}`.length)}composeCauseAndPositionWithUnSameLength(o,r,e,t){for(let r=0;r<o.length;r++){t+=o[r]+`${os_1.default.EOL}`}for(let o=0;o<r.length;o++){t+=e+r[o]+`${os_1.default.EOL}`}return t.slice(0,-`${os_1.default.EOL}`.length)}combinePhase3(o){let r=`${os_1.default.EOL}* Try the following:${os_1.default.EOL}`;const e=o.getSolutions();if(!(e instanceof Array&&e.length>0))return"";e.forEach(o=>{r+=`  > ${o}${os_1.default.EOL}`});const t=o.getMoreInfo();if(t){const o=t[(0,hvigor_common_1.getOsLanguage)()];r+=`  > More info: ${o}${os_1.default.EOL}`}return r}}exports.HvigorErrorCommonAdapter=HvigorErrorCommonAdapter,HvigorErrorCommonAdapter.red="[31m",HvigorErrorCommonAdapter.green="[32m",HvigorErrorCommonAdapter.yellow="[33m",HvigorErrorCommonAdapter.blue="[34m",HvigorErrorCommonAdapter.reset="[39m";